<!-- post/detail.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{ /layout/basic-layout }">
<title>Wacdonaldo</title>


<div layout:fragment="content" id="mContent">

    <div id="main">   
    <form id="formDelete"> 	
    <div id="head">         
        <div class="div_label" th:if="${ #authentication.name } == admin">
            <label for="postId" class="form-label">글 번호</label>
            <input id="postId" name="id" class="form-control" th:value="${ post.postId }" readonly />
        </div>  
        <div class="div_label">           
            <input readonly th:value="${ post.title }" class="h-label" id="title" />
        </div>
        <div class="div_label">                    
            <input readonly th:value="${ post.author }" class="h-label" />
        </div>
        <div class="div_label">                        
            <input readonly th:value="${ post.kind }" class="h-label" />
        </div>
    </div>  
            
        <div id="c-label">
            <p class="b-label"></p>
        </div>
    </form>
        <div class="div_label" th:if="${ #authentication.name } == admin">
	        <button class="buttons" id="btnDelete">삭제하기</button>
        </div>
    </div>

</div>

<th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/postDetail.css}">
</th:block>
<th:block layout:fragment="script">
<script>
const formDelete = document.querySelector('#formDelete');

// 삭제 이벤트 리스너.
const btnDelete = document.querySelector('#btnDelete');
btnDelete.addEventListener('click', function () {
    const result = confirm('정말 삭제하시겠습니까?');
    if (result) {
        formDelete.action = '/post/delete';
        formDelete.method = 'post';
        formDelete.submit();
    }
});
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script th:inline="javascript">
    	const contentP = [[ ${ post.content } ]];
    	document.querySelector('.b-label').innerHTML=contentP;
    </script>
</th:block>
</html>



